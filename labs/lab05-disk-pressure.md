# LAB 05 â€“ Disk Space Monitoring and Alerting

## Goal
Monitor disk usage, create a trigger for low free space, and handle a disk pressure incident.

## Metric
Filesystem disk usage percentage was monitored using:
- vfs.fs.dependent.size[/etc/hosts,pused]

This metric reflects the percentage of used disk space on the filesystem
where the file resides (root filesystem).

## Trigger
A trigger was created to detect low free disk space:

- Name: High disk usage on filesystem
- Expression:
  last(/zbx-agent/vfs.fs.dependent.size[/etc/hosts,pused]) > 85
- Severity: High

This corresponds to less than 15% free disk space.

## Incident simulation
Disk pressure was intentionally generated by creating large test files
on the root filesystem:

- fallocate was used to increase disk usage
- disk usage was verified using df -h

Once disk usage exceeded the threshold, the trigger fired and an alert
appeared in Zabbix.

## Recovery
Test files were removed from the filesystem.
Disk usage returned to normal levels and the alert was automatically resolved.

## Additional observations
During disk pressure testing, increased swap usage was observed.
This highlighted how disk and memory pressure can occur simultaneously.

The swap alert was informational, as the system remained responsive.
This demonstrated the importance of alert correlation and noise reduction.

## Result
Disk space monitoring, alerting, incident simulation, and recovery
were successfully implemented and validated.
